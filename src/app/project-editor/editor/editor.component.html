<mat-sidenav-container style="height:calc(100% - 64px)" (appDropZone)="onFileDrop($event)" autosize hasBackdrop="false">
	<mat-sidenav mode="side" opened disableClose>
		<mat-accordion>
			<mat-expansion-panel expanded id="assets-panel">
				<mat-expansion-panel-header>
					<mat-panel-title>Assets</mat-panel-title>
				</mat-expansion-panel-header>
				<mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">
					<mat-button-toggle-group [ngModel]="selectedElement" (ngModelChange)="select($event)">
						<!-- This is the tree node template for leaf nodes -->
						<mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
							<li class="mat-tree-node">
								<!-- use a disabled button to provide padding for tree leaf -->
								<button mat-icon-button disabled></button>
								<mat-button-toggle class="selectable" [value]="node">
									<mat-icon class="type-icon">
										{{getDisplayIcon(node.type)}}
									</mat-icon>
									{{node.ref.name}}
								</mat-button-toggle>
							</li>
						</mat-tree-node>
						<!-- This is the tree node template for expandable nodes -->
						<mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
							<li>
								<div class="mat-tree-node">
									<button mat-icon-button matTreeNodeToggle
										[attr.aria-label]="'Toggle ' + node.ref.name">
										<mat-icon class="mat-icon-rtl-mirror">
											{{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
										</mat-icon>
									</button>
									<mat-button-toggle class="selectable" [value]="node">
										<mat-icon class="type-icon">
											{{getDisplayIcon(node.type)}}
										</mat-icon>
										{{node.ref.name}}
									</mat-button-toggle>
								</div>
								<ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">
									<ng-container matTreeNodeOutlet></ng-container>
								</ul>
							</li>
						</mat-nested-tree-node>
					</mat-button-toggle-group>
				</mat-tree>
				<button class="asset-button" mat-raised-button color="primary" (click)="uploadAssetsPopup()">
					Upload Assets
				</button>
				<button class="asset-button" mat-raised-button color="primary" (click)="newCollection([])">
					New Collection
				</button>
			</mat-expansion-panel>
		</mat-accordion>
	</mat-sidenav>
	<mat-sidenav #rightNav mode="over" position=end disableClose>
		<mat-accordion multi>
			<mat-expansion-panel expanded *ngIf="!!selectedElement">
				<mat-expansion-panel-header>
					<mat-panel-title>
						{{selectedElement.type}} Info
					</mat-panel-title>
					<mat-panel-description>
						{{selectedElement.ref.name}}
					</mat-panel-description>
				</mat-expansion-panel-header>
				<mat-form-field>
					<mat-label>Name</mat-label>
					<input matInput [(ngModel)]="selectedElement.ref.name" (ngModelChange)="dirty = true;">
				</mat-form-field>
				<mat-form-field>
					<mat-label>Angle</mat-label>
					<input matInput type="number" [(ngModel)]="selectedElement.image.angle"
						(ngModelChange)="selectedElement.ref.angle = selectedElement.image.angle; canvas.renderAll(); dirty = true;">
				</mat-form-field>
				<mat-slider min=0 max=360 thumbLabel [(ngModel)]="selectedElement.image.angle"
					(ngModelChange)="selectedElement.ref.angle = selectedElement.image.angle; canvas.renderAll(); dirty = true;">
				</mat-slider>
				<mat-form-field>
					<mat-label>Scale</mat-label>
					<input matInput type="number" [(ngModel)]="selectedElement.image.scaleX" step=.01
						(ngModelChange)="selectedElement.ref.scale.x = selectedElement.ref.scale.y = selectedElement.image.scaleY = selectedElement.image.scaleX; canvas.renderAll(); dirty = true;">
				</mat-form-field>
				<mat-slider min=0 max=2 step=.01 thumbLabel [(ngModel)]="selectedElement.image.scaleX"
					(ngModelChange)="selectedElement.ref.scale.x = selectedElement.ref.scale.y = selectedElement.image.scaleY = selectedElement.image.scaleX; canvas.renderAll(); dirty = true;">
				</mat-slider>
				<mat-checkbox [(ngModel)]="selectedElement.ref.hiddenFromPlayers" (ngModelChange)="dirty = true">
					Hide from players
				</mat-checkbox>
			</mat-expansion-panel>
		</mat-accordion>
	</mat-sidenav>
	<mat-sidenav-content id="toolkit-canvas-container">
		<canvas #myCanvas id="toolkit-canvas"></canvas>
	</mat-sidenav-content>
</mat-sidenav-container>